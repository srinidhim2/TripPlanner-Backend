# API cURL Examples for TripPlanner Backend

Replace `localhost:3003` with your user service host, and `localhost:3004` with your trip service host if different.

## Authentication

Login (User service)

```bash
curl -X POST http://localhost:3003/user/login \
  -H "Content-Type: application/json" \
  -d '{"email":"john.doe@example.com","password":"secret123"}'
```

Successful response includes `token`. You can use it as a cookie or Bearer header.

Login using Bearer header

```bash
curl -X POST http://localhost:3003/user/login \
  -H "Content-Type: application/json" \
  -d '{"email":"john.doe@example.com","password":"secret123"}'
```

Logout (use cookie or Bearer header)

```bash
curl -X POST http://localhost:3003/user/logout \
  -H "Authorization: Bearer <token>" \
  --cookie "token=<token>"
```

## User APIs

Create user

```bash
curl -X POST http://localhost:3003/user \
  -H "Content-Type: application/json" \
  -d '{
    "name":"John Doe",
    "dateOfBirth":"1990-01-01",
    "email":"john.doe@example.com",
    "password":"secret123",
    "phone":"1234567890",
    "gender":"male"
  }'
```

Get user (protected)

```bash
curl -X GET http://localhost:3003/user/<userId> \
  -H "Authorization: Bearer <token>"
```

Upload profile photo

```bash
curl -X POST http://localhost:3003/user/<userId>/photo \
  -H "Authorization: Bearer <token>" \
  -F "profilePhoto=@/path/to/photo.jpg"
```

## Trip APIs (Trip service)

Create trip

```bash
curl -X POST http://localhost:3004/trip/createTrip \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name":"Weekend Trip",
    "startDate":"2025-10-20T09:00:00Z",
    "endDate":"2025-10-21T18:00:00Z",
    "schedules": [
      {"id":"s1","status":"pending","targetTime":"2025-10-20T10:00:00Z"}
    ],
    "places":["Park","Cafe"],
    "peoples":[{"userId":"68a4a5418ae6f7d995b327dd","role":"organizer"}]
  }'
```

Add schedule to trip

```bash
curl -X POST http://localhost:3004/trip/<tripId>/schedules \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"id":"s2","status":"pending","targetTime":"2025-10-20T13:00:00Z"}'
```

Update schedule

```bash
curl -X PATCH http://localhost:3004/trip/<tripId>/schedules/<scheduleId> \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"id":"s2","status":"completed","completedOn":"2025-10-20T14:00:00Z","targetTime":"2025-10-20T13:00:00Z"}'
```

Get all schedules

```bash
curl -X GET http://localhost:3004/trip/<tripId>/schedules \
  -H "Authorization: Bearer <token>"
```

Get schedule by id

```bash
curl -X GET http://localhost:3004/trip/<tripId>/schedules/<scheduleId> \
  -H "Authorization: Bearer <token>"
```

## Notification Service APIs (assumes notification service on port 3005)

Get all notifications

```bash
curl -X GET http://localhost:3005/notifications \
  -H "Authorization: Bearer <token>"
```

Get read notifications

```bash
curl -X GET http://localhost:3005/notifications/read \
  -H "Authorization: Bearer <token>"
```

Toggle notification read state

```bash
curl -X PATCH http://localhost:3005/notifications/<notificationId>/toggle \
  -H "Authorization: Bearer <token>"
```

Mark all notifications read/unread

```bash
curl -X PATCH http://localhost:3005/notifications/markAll \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"read": true}'
```


---
Generated by reading project controllers and routes. Update hosts/ports as necessary.
